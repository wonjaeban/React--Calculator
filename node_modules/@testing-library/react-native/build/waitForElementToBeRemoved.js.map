{"version":3,"sources":["../src/waitForElementToBeRemoved.ts"],"names":["isRemoved","result","Array","isArray","length","waitForElementToBeRemoved","expectation","options","timeoutError","ErrorWithStack","initialElements","error"],"mappings":";;;;;;;AAAA;;AAEA;;;;AAEA,SAASA,SAAT,CAAsBC,MAAtB,EAA0C;AACxC,SAAO,CAACA,MAAD,IAAYC,KAAK,CAACC,OAAN,CAAcF,MAAd,KAAyB,CAACA,MAAM,CAACG,MAApD;AACD;;AAEc,eAAeC,yBAAf,CACbC,WADa,EAEbC,OAFa,EAGD;AACZ;AACA,QAAMC,YAAY,GAAG,IAAIC,sBAAJ,CACnB,yCADmB,EAEnBJ,yBAFmB,CAArB,CAFY,CAOZ;;AACA,QAAMK,eAAe,GAAGJ,WAAW,EAAnC;;AACA,MAAIN,SAAS,CAACU,eAAD,CAAb,EAAgC;AAC9B,UAAM,IAAID,sBAAJ,CACJ,oKADI,EAEJJ,yBAFI,CAAN;AAID;;AAED,SAAO,sBAAQ,MAAM;AACnB,QAAIJ,MAAJ;;AACA,QAAI;AACFA,MAAAA,MAAM,GAAGK,WAAW,EAApB;AACD,KAFD,CAEE,OAAOK,KAAP,EAAc;AACd,aAAOD,eAAP;AACD;;AAED,QAAI,CAACV,SAAS,CAACC,MAAD,CAAd,EAAwB;AACtB,YAAMO,YAAN;AACD;;AAED,WAAOE,eAAP;AACD,GAbM,EAaJH,OAbI,CAAP;AAcD","sourcesContent":["import waitFor from './waitFor';\nimport type { WaitForOptions } from './waitFor';\nimport { ErrorWithStack } from './helpers/errors';\n\nfunction isRemoved<T>(result: T): boolean {\n  return !result || (Array.isArray(result) && !result.length);\n}\n\nexport default async function waitForElementToBeRemoved<T>(\n  expectation: () => T,\n  options?: WaitForOptions\n): Promise<T> {\n  // Created here so we get a nice stacktrace\n  const timeoutError = new ErrorWithStack(\n    'Timed out in waitForElementToBeRemoved.',\n    waitForElementToBeRemoved\n  );\n\n  // Elements have to be present initally and then removed.\n  const initialElements = expectation();\n  if (isRemoved(initialElements)) {\n    throw new ErrorWithStack(\n      'The element(s) given to waitForElementToBeRemoved are already removed. waitForElementToBeRemoved requires that the element(s) exist(s) before waiting for removal.',\n      waitForElementToBeRemoved\n    );\n  }\n\n  return waitFor(() => {\n    let result;\n    try {\n      result = expectation();\n    } catch (error) {\n      return initialElements;\n    }\n\n    if (!isRemoved(result)) {\n      throw timeoutError;\n    }\n\n    return initialElements;\n  }, options);\n}\n"],"file":"waitForElementToBeRemoved.js"}